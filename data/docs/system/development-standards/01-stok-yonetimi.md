# Context7 ERP System - Stok Y√∂netimi Mod√ºl√º Dok√ºmantasyonu

**Mod√ºl Kodu:** INV-001  
**Mod√ºl Adƒ±:** Inventory Management (Stok Y√∂netimi)  
**Versiyon:** v2.2.0-glassmorphism-enhanced  
**Son G√ºncelleme:** 13 Haziran 2025  
**Durum:** ‚úÖ Production Ready (95% Tamamlandƒ±)  
**√ñncelik:** üî• Kritik (Temel ƒ∞≈ü S√ºreci)  
**Tahmini Geli≈ütirme S√ºresi:** 120 saat  

---

## üìã Mod√ºl Genel Bakƒ±≈ü

Stok Y√∂netimi mod√ºl√º, i≈ületmenin t√ºm fiziksel varlƒ±klarƒ±nƒ±n takibini, kontrol√ºn√º ve optimizasyonunu saƒülayan temel ERP bile≈üenidir. Bu mod√ºl, hammadde giri≈üinden nihai √ºr√ºn sevkiyatƒ±na kadar t√ºm stok hareketlerini y√∂netir.

### üéØ Temel Ama√ßlar
- Ger√ßek zamanlƒ± stok seviyesi takibi
- Otomatik yeniden sipari≈ü noktasƒ± uyarƒ±larƒ±
- √áoklu depo ve lokasyon y√∂netimi
- Stok maliyetlendirme ve deƒüerleme
- FIFO/LIFO/Weighted Average maliyet y√∂ntemleri
- Seri/lot numarasƒ± takibi
- Stok sayƒ±m ve uyu≈ümazlƒ±k y√∂netimi

---

## üèóÔ∏è Mod√ºl Mimarisi

### Ana Bile≈üenler
1. **Depo Y√∂netimi** (Warehouse Management)
2. **√úr√ºn/Malzeme Tanƒ±mlarƒ±** (Product/Material Definitions)
3. **Stok Hareketleri** (Inventory Movements)
4. **Stok Seviyesi Takibi** (Stock Level Monitoring)
5. **Lokasyon Y√∂netimi** (Location Management)
6. **Seri/Lot Takibi** (Serial/Lot Tracking)
7. **Stok Sayƒ±m** (Physical Inventory)
8. **Risk Y√∂netimi** (Risk Management)
9. **Dinamik Fiyatlandƒ±rma** (Dynamic Pricing)
10. **ƒ∞skonto Tanƒ±mlarƒ±** (Discount Definitions)

---

## üóÑÔ∏è Veritabanƒ± Modelleri

### 1. Warehouse (Depo) Modeli
```python
class Warehouse(models.Model):
    warehouse_code = models.CharField(max_length=20, unique=True)
    name = models.CharField(max_length=100)
    address = models.TextField()
    manager = models.ForeignKey(User, on_delete=models.SET_NULL, null=True)
    capacity = models.DecimalField(max_digits=15, decimal_places=2)
    warehouse_type = models.CharField(max_length=50)  # Main, Transit, Quarantine
    temperature_controlled = models.BooleanField(default=False)
    security_level = models.CharField(max_length=20)
    operating_hours = models.CharField(max_length=100)
    is_active = models.BooleanField(default=True)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
```

### 2. Location (Lokasyon) Modeli
```python
class Location(models.Model):
    location_code = models.CharField(max_length=30, unique=True)
    warehouse = models.ForeignKey(Warehouse, on_delete=models.CASCADE)
    aisle = models.CharField(max_length=10)
    shelf = models.CharField(max_length=10)
    bin = models.CharField(max_length=10)
    zone = models.ForeignKey('Zone', on_delete=models.SET_NULL, null=True)
    capacity = models.DecimalField(max_digits=10, decimal_places=2)
    current_usage = models.DecimalField(max_digits=10, decimal_places=2, default=0)
    location_type = models.CharField(max_length=30)  # Storage, Picking, QC
    barcode = models.CharField(max_length=50, blank=True)
    is_active = models.BooleanField(default=True)
```

### 3. Zone (B√∂lge) Modeli
```python
class Zone(models.Model):
    zone_name = models.CharField(max_length=50)
    zone_code = models.CharField(max_length=20, unique=True)
    warehouse = models.ForeignKey(Warehouse, on_delete=models.CASCADE)
    zone_type = models.CharField(max_length=30)  # Fast-moving, Slow-moving, Hazardous
    temperature_range = models.CharField(max_length=50, blank=True)
    special_conditions = models.TextField(blank=True)
    access_level = models.CharField(max_length=20)
    is_active = models.BooleanField(default=True)
```

### 4. ProductVariant (√úr√ºn Varyantƒ±) Modeli
```python
class ProductVariant(models.Model):
    product = models.ForeignKey(Product, on_delete=models.CASCADE)
    variant_sku = models.CharField(max_length=50, unique=True)
    color = models.ForeignKey('Color', on_delete=models.SET_NULL, null=True)
    size = models.ForeignKey('Size', on_delete=models.SET_NULL, null=True)
    brand = models.ForeignKey('Brand', on_delete=models.SET_NULL, null=True)
    model = models.ForeignKey('ProductModel', on_delete=models.SET_NULL, null=True)
    barcode = models.CharField(max_length=50, unique=True)
    additional_cost = models.DecimalField(max_digits=10, decimal_places=2, default=0)
    weight = models.DecimalField(max_digits=8, decimal_places=3, null=True)
    dimensions = models.CharField(max_length=100, blank=True)  # LxWxH
    is_active = models.BooleanField(default=True)
```

### 5. StockLevel (Stok Seviyesi) Modeli
```python
class StockLevel(models.Model):
    product = models.ForeignKey(Product, on_delete=models.CASCADE)
    variant = models.ForeignKey(ProductVariant, on_delete=models.CASCADE, null=True)
    warehouse = models.ForeignKey(Warehouse, on_delete=models.CASCADE)
    location = models.ForeignKey(Location, on_delete=models.SET_NULL, null=True)
    available_quantity = models.DecimalField(max_digits=15, decimal_places=4)
    reserved_quantity = models.DecimalField(max_digits=15, decimal_places=4, default=0)
    blocked_quantity = models.DecimalField(max_digits=15, decimal_places=4, default=0)
    minimum_stock_level = models.DecimalField(max_digits=10, decimal_places=4)
    maximum_stock_level = models.DecimalField(max_digits=10, decimal_places=4)
    reorder_point = models.DecimalField(max_digits=10, decimal_places=4)
    optimal_stock_level = models.DecimalField(max_digits=10, decimal_places=4)
    last_movement_date = models.DateTimeField()
    average_daily_consumption = models.DecimalField(max_digits=10, decimal_places=4, default=0)
    lead_time_days = models.IntegerField(default=7)
    last_updated = models.DateTimeField(auto_now=True)
```

### 6. SerialLotTracking (Seri/Lot Takibi) Modeli
```python
class SerialLotTracking(models.Model):
    TRACKING_TYPE_CHOICES = [
        ('serial', 'Serial Number'),
        ('lot', 'Lot Number'),
        ('both', 'Both Serial and Lot'),
    ]
    
    product = models.ForeignKey(Product, on_delete=models.CASCADE)
    tracking_type = models.CharField(max_length=10, choices=TRACKING_TYPE_CHOICES)
    serial_number = models.CharField(max_length=100, blank=True)
    lot_number = models.CharField(max_length=100, blank=True)
    manufacturing_date = models.DateField()
    expiry_date = models.DateField(null=True, blank=True)
    supplier = models.ForeignKey(Supplier, on_delete=models.SET_NULL, null=True)
    supplier_lot_number = models.CharField(max_length=100, blank=True)
    current_location = models.ForeignKey(Location, on_delete=models.SET_NULL, null=True)
    status = models.CharField(max_length=20)  # Available, Sold, Blocked, Expired
    quality_status = models.CharField(max_length=20)  # Passed, Failed, Pending
    notes = models.TextField(blank=True)
    created_at = models.DateTimeField(auto_now_add=True)
```

### 7. StockAdjustment (Stok D√ºzeltme) Modeli
```python
class StockAdjustment(models.Model):
    ADJUSTMENT_TYPE_CHOICES = [
        ('physical_count', 'Physical Count'),
        ('damage', 'Damage'),
        ('theft', 'Theft'),
        ('system_error', 'System Error'),
        ('write_off', 'Write Off'),
        ('found', 'Found Items'),
    ]
    
    adjustment_number = models.CharField(max_length=50, unique=True)
    adjustment_date = models.DateTimeField()
    adjustment_type = models.CharField(max_length=20, choices=ADJUSTMENT_TYPE_CHOICES)
    product = models.ForeignKey(Product, on_delete=models.CASCADE)
    warehouse = models.ForeignKey(Warehouse, on_delete=models.CASCADE)
    location = models.ForeignKey(Location, on_delete=models.SET_NULL, null=True)
    book_quantity = models.DecimalField(max_digits=15, decimal_places=4)
    physical_quantity = models.DecimalField(max_digits=15, decimal_places=4)
    variance_quantity = models.DecimalField(max_digits=15, decimal_places=4)
    unit_cost = models.DecimalField(max_digits=15, decimal_places=4)
    total_value_impact = models.DecimalField(max_digits=15, decimal_places=2)
    reason = models.TextField()
    approved_by = models.ForeignKey(User, on_delete=models.PROTECT)
    approval_date = models.DateTimeField()
    created_by = models.ForeignKey(User, on_delete=models.PROTECT, related_name='created_adjustments')
    created_at = models.DateTimeField(auto_now_add=True)
```

### 8. DynamicPricing (Dinamik Fiyatlandƒ±rma) Modeli
```python
class DynamicPricing(models.Model):
    PRICING_TYPE_CHOICES = [
        ('customer_specific', 'Customer Specific'),
        ('volume_discount', 'Volume Discount'),
        ('seasonal', 'Seasonal Pricing'),
        ('promotional', 'Promotional Pricing'),
    ]
    
    product = models.ForeignKey(Product, on_delete=models.CASCADE)
    customer = models.ForeignKey(Customer, on_delete=models.CASCADE, null=True, blank=True)
    pricing_type = models.CharField(max_length=20, choices=PRICING_TYPE_CHOICES)
    base_price = models.DecimalField(max_digits=15, decimal_places=4)
    special_price = models.DecimalField(max_digits=15, decimal_places=4)
    min_quantity = models.DecimalField(max_digits=10, decimal_places=2, default=1)
    max_quantity = models.DecimalField(max_digits=10, decimal_places=2, null=True, blank=True)
    discount_percentage = models.DecimalField(max_digits=5, decimal_places=2, default=0)
    currency = models.CharField(max_length=3, default='TRY')
    valid_from = models.DateTimeField()
    valid_to = models.DateTimeField()
    is_active = models.BooleanField(default=True)
    created_at = models.DateTimeField(auto_now_add=True)
```

---

## üîß API Endpoints

### Depo Y√∂netimi Endpoints
```http
GET     /api/v1/inventory/warehouses/                  # Depo listesi
POST    /api/v1/inventory/warehouses/                  # Yeni depo olu≈ütur
GET     /api/v1/inventory/warehouses/{id}/             # Depo detayƒ±
PUT     /api/v1/inventory/warehouses/{id}/             # Depo g√ºncelle
DELETE  /api/v1/inventory/warehouses/{id}/             # Depo sil
GET     /api/v1/inventory/warehouses/{id}/locations/   # Depo lokasyonlarƒ±
GET     /api/v1/inventory/warehouses/{id}/stock-levels/ # Depo stok seviyeleri
```

### Stok Seviyesi Takibi Endpoints
```http
GET     /api/v1/inventory/stock-levels/                # T√ºm stok seviyeleri
GET     /api/v1/inventory/stock-levels/low-stock/      # D√º≈ü√ºk stoklar
GET     /api/v1/inventory/stock-levels/reorder-alerts/ # Yeniden sipari≈ü uyarƒ±larƒ±
GET     /api/v1/inventory/stock-levels/product/{id}/   # √úr√ºn stok seviyeleri
PUT     /api/v1/inventory/stock-levels/{id}/reserve/   # Stok rezerve et
PUT     /api/v1/inventory/stock-levels/{id}/release/   # Rezervasyonu kaldƒ±r
```

### Stok Hareketleri Endpoints
```http
GET     /api/v1/inventory/movements/                   # Stok hareketleri
POST    /api/v1/inventory/movements/                   # Yeni hareket kaydet
GET     /api/v1/inventory/movements/product/{id}/      # √úr√ºn hareketleri
GET     /api/v1/inventory/movements/warehouse/{id}/    # Depo hareketleri
GET     /api/v1/inventory/movements/between-dates/     # Tarih aralƒ±ƒüƒ± hareketleri
```

### Stok Sayƒ±m Endpoints
```http
GET     /api/v1/inventory/adjustments/                 # Stok d√ºzeltmeleri
POST    /api/v1/inventory/adjustments/                 # Yeni d√ºzeltme
GET     /api/v1/inventory/adjustments/{id}/            # D√ºzeltme detayƒ±
PUT     /api/v1/inventory/adjustments/{id}/approve/    # D√ºzeltme onayla
GET     /api/v1/inventory/physical-count/              # Sayƒ±m listesi
POST    /api/v1/inventory/physical-count/start/        # Sayƒ±m ba≈ülat
PUT     /api/v1/inventory/physical-count/{id}/complete/ # Sayƒ±m tamamla
```

### Seri/Lot Takibi Endpoints
```http
GET     /api/v1/inventory/serial-lot/                  # Seri/lot listesi
POST    /api/v1/inventory/serial-lot/                  # Yeni seri/lot kaydet
GET     /api/v1/inventory/serial-lot/{id}/             # Seri/lot detayƒ±
GET     /api/v1/inventory/serial-lot/trace/{serial}/   # Seri numarasƒ± takibi
GET     /api/v1/inventory/serial-lot/expiring/         # S√ºresi dolan √ºr√ºnler
PUT     /api/v1/inventory/serial-lot/{id}/move/        # Lokasyon deƒüi≈ütir
```

### Raporlama Endpoints
```http
GET     /api/v1/inventory/reports/stock-valuation/     # Stok deƒüerleme raporu
GET     /api/v1/inventory/reports/abc-analysis/        # ABC analizi
GET     /api/v1/inventory/reports/slow-moving/         # Yava≈ü hareket eden stok
GET     /api/v1/inventory/reports/aging/               # Stok ya≈ülandƒ±rma
GET     /api/v1/inventory/reports/turnover/            # Stok devir hƒ±zƒ±
```

---

## üé® Kullanƒ±cƒ± Aray√ºz√º Gereksinimleri

### Ana Stok Dashboard'u
- **Stok √ñzet Kartlarƒ±**: Toplam stok deƒüeri, d√º≈ü√ºk stok uyarƒ±larƒ±, son hareketler
- **Grafik G√∂stergeler**: Stok seviyesi trendleri, ABC analizi pasta grafiƒüi
- **Hƒ±zlƒ± Eri≈üim**: Stok sayƒ±mƒ± ba≈ülat, acil sipari≈ü olu≈ütur, hareket kaydƒ±
- **Uyarƒ± Paneli**: Kritik stok seviyeleri, s√ºresi dolan √ºr√ºnler, sayƒ±m gerekenleri

### Stok Listesi Sayfasƒ±
- **Geli≈ümi≈ü Filtreleme**: Depo, kategori, marka, stok durumu, fiyat aralƒ±ƒüƒ±
- **Sƒ±ralama Se√ßenekleri**: Stok miktarƒ±, son hareket tarihi, deƒüer, ABC sƒ±nƒ±fƒ±
- **Toplu ƒ∞≈ülemler**: √áoklu √ºr√ºn se√ßimi, toplu fiyat g√ºncelleme, lokasyon deƒüi≈üimi
- **Export Fonksiyonlarƒ±**: Excel, PDF, CSV formatlarƒ±nda rapor alma

### Stok Hareketi Kayƒ±t Formu
- **Hareket Tipi Se√ßimi**: Giri≈ü, √ßƒ±kƒ±≈ü, transfer, sayƒ±m, d√ºzeltme
- **√úr√ºn/Malzeme Se√ßimi**: Barcode okutma, dropdown, arama fonksiyonu
- **Miktar ve Birim**: Doƒürulama kurallarƒ±, ondalƒ±k hassasiyet ayarlarƒ±
- **Lokasyon Bilgileri**: Kaynak ve hedef lokasyon se√ßimi, barcode desteƒüi

### Stok Sayƒ±m Aray√ºz√º
- **Sayƒ±m Planƒ± Olu≈üturma**: D√∂ng√ºsel sayƒ±m, tam sayƒ±m, spot sayƒ±m se√ßenekleri
- **Mobil Uyumlu Sayƒ±m**: Tablet/telefon desteƒüi, offline √ßalƒ±≈üma yeteneƒüi
- **Ger√ßek Zamanlƒ± Takip**: Sayƒ±m ilerlemesi, tamamlanan lokasyonlar
- **Uyu≈ümazlƒ±k Y√∂netimi**: Fark analizi, onay s√ºreci, d√ºzeltme √∂nerileri

---

## üîÑ ƒ∞≈ü S√ºre√ßleri

### 1. Stok Giri≈ü S√ºreci
```mermaid
graph TD
    A[Malzeme Giri≈üi] --> B[Kalite Kontrol]
    B --> C{Kalite OK?}
    C -->|Evet| D[Lokasyon Atama]
    C -->|Hayƒ±r| E[Karantina/ƒ∞ade]
    D --> F[Stok G√ºncelleme]
    F --> G[Seri/Lot Kayƒ±t]
    G --> H[Hareket Kaydƒ±]
    H --> I[Bildirim G√∂nder]
```

### 2. Stok √áƒ±kƒ±≈ü S√ºreci
```mermaid
graph TD
    A[Sipari≈ü Onayƒ±] --> B[Stok Kontrol√º]
    B --> C{Stok Var?}
    C -->|Evet| D[Rezervasyon]
    C -->|Hayƒ±r| E[Alternatif Arama]
    D --> F[Picking Listesi]
    F --> G[Malzeme Toplama]
    G --> H[Kalite Kontrol]
    H --> I[Sevkiyat Hazƒ±rlƒ±k]
    I --> J[Stok G√ºncelleme]
```

### 3. Stok Sayƒ±m S√ºreci
```mermaid
graph TD
    A[Sayƒ±m Planƒ±] --> B[Lokasyon Dondurma]
    B --> C[Sayƒ±m Ekibi Atama]
    C --> D[Fiziksel Sayƒ±m]
    D --> E[Veri Giri≈üi]
    E --> F{Uyu≈ümazlƒ±k?}
    F -->|Evet| G[Yeniden Sayƒ±m]
    F -->|Hayƒ±r| H[Onay]
    G --> E
    H --> I[Stok D√ºzeltme]
    I --> J[Hareket Kaydƒ±]
```

---

## üìä Uygulama Planƒ±

### Faz 1: Temel Stok Takibi (2 hafta)
- [x] Depo ve lokasyon tanƒ±mlarƒ±
- [x] Temel stok hareketleri
- [x] Stok seviye takibi
- [x] Basit raporlama

### Faz 2: Geli≈ümi≈ü √ñzellikler (3 hafta)
- [ ] Seri/lot numarasƒ± takibi
- [ ] Dinamik fiyatlandƒ±rma sistemi
- [ ] ABC analizi
- [ ] Otomatik yeniden sipari≈ü

### Faz 3: ƒ∞leri Seviye Fonksiyonlar (2 hafta)
- [ ] Stok sayƒ±m sistemi
- [ ] Mobil uygulama entegrasyonu
- [ ] Barcode/QR code desteƒüi
- [ ] Advanced analytics

### Faz 4: Optimizasyon ve Entegrasyon (1 hafta)
- [ ] Performans optimizasyonu
- [ ] Diƒüer mod√ºllerle entegrasyon
- [ ] API geli≈ütirmeleri
- [ ] G√ºvenlik testleri

---

## üîó Mod√ºl Baƒüƒ±mlƒ±lƒ±klarƒ±

### Gerekli Mod√ºller
- **Core Module**: Temel veri yapƒ±larƒ± (Product, Material, Supplier)
- **User Management**: Kullanƒ±cƒ± yetkilendirme ve roller
- **Quality Control**: Giri≈ü ve √ßƒ±kƒ±≈ü kalite kontrolleri
- **Purchase Module**: Satƒ±n alma sipari≈üleri ile entegrasyon

### Entegrasyon Noktalarƒ±
- **Sales Module**: Satƒ±≈ü sipari≈üleri ‚Üí Stok rezervasyonu
- **Production Module**: √úretim emirleri ‚Üí Hammadde t√ºketimi
- **Finance Module**: Stok deƒüerleme ‚Üí Mali raporlama
- **API Gateway**: Harici sistem entegrasyonlarƒ±

---

## ‚ö†Ô∏è Kritik Notlar

### G√ºvenlik Gereksinimleri
- Stok hareketi yetkisi kontrol√º
- Kritik i≈ülemler i√ßin √ßift onay sistemi
- Audit trail t√ºm i≈ülemler i√ßin zorunlu
- IP kƒ±sƒ±tlamalarƒ± hassas i≈ülemler i√ßin

### Performans Kriterleri
- Stok sorgulama < 2 saniye
- Hareket kaydƒ± < 1 saniye
- Rapor olu≈üturma < 10 saniye
- E≈ü zamanlƒ± 100+ kullanƒ±cƒ± desteƒüi

### Backup ve Veri G√ºvenliƒüi
- Ger√ßek zamanlƒ± backup sistemi
- 7/24 izleme ve uyarƒ± sistemi
- Felaket kurtarma planƒ±
- GDPR uyumluluk gereksinimleri

---

**Hazƒ±rlayan:** Context7 ERP Development Team  
**Onaylayan:** System Architect  
**Versiyon:** 1.0  
**Son G√ºncelleme:** 13 Haziran 2025 