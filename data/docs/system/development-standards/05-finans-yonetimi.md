# Context7 ERP - Finans Y√∂netimi Mod√ºl√º
**Mod√ºl Kodu:** FINANCE-MGT  
**√ñncelik:** 1 - Kritik  
**Tahmini S√ºre:** 6-8 hafta  
**Baƒüƒ±mlƒ±lƒ±klar:** Cari Hesap, Muhasebe, Banka Entegrasyonu  

---

## üìã Mod√ºl A√ßƒ±klamasƒ±

Geli≈ümi≈ü finansal y√∂netim sistemi; √ßok para birimi desteƒüi, kredi y√∂netimi, √ßek/senet takibi, nakit akƒ±≈ü y√∂netimi ve kapsamlƒ± finansal raporlama √∂zelliklerini i√ßeren enterprise-level finans √ß√∂z√ºm√º.

---

## üéØ Ana √ñzellikler

### **1. Geli≈ümi≈ü Muhasebe Sistemi**

#### **Multi-Currency Accounting**
- **Real-time Exchange Rates**
  - Canlƒ± d√∂viz kurlarƒ±
  - Otomatik kur g√ºncellemesi
  - Kur ge√ßmi≈üi takibi
  - Merkez Bankasƒ± entegrasyonu

- **Currency Hedging**
  - Kur riski y√∂netimi
  - Forward kontratlarƒ±
  - Hedge accounting
  - Risk analizi raporlarƒ±

- **Revaluation Process**
  - Periyodik yeniden deƒüerleme
  - Kur farkƒ± hesaplama
  - Otomatik muhasebe kayƒ±tlarƒ±
  - Varyans analizi

#### **Credit Management**
- **Customer Credit Limits**
  - Kredi limit tanƒ±mlama
  - Risk deƒüerlendirmesi
  - √ñdeme davranƒ±≈üƒ± analizi
  - Otomatik limit kontrol√º

- **Credit Scoring**
  - Kredi puanlama sistemi
  - Risk kategorileri
  - Ge√ßmi≈ü performans analizi
  - Otomatik uyarƒ± sistemi

- **Payment Behavior Analysis**
  - √ñdeme vadesi analizi
  - Gecikme paternleri
  - DSO (Days Sales Outstanding) hesaplama
  - Collection efficiency

#### **Cash Flow Management**
- **Cash Flow Forecasting**
  - Nakit akƒ±≈ü tahminleri
  - Senaryolu planlamalar
  - Trend analizleri
  - Early warning sistem

- **Liquidity Planning**
  - Likidite planlamasƒ±
  - Minimum nakit seviyesi
  - Fazlalƒ±k yatƒ±rƒ±m √∂nerileri
  - Kƒ±sa vadeli bor√ßlanma planƒ±

### **2. √áek ve Senet Y√∂netimi**

#### **Check Tracking**
- **Check Register**
  - √áek kayƒ±t sistemi
  - Vade tarihi takibi
  - Tahsilat durumu
  - Banka detaylarƒ±

- **Due Date Monitoring**
  - Vade tarihi uyarƒ±larƒ±
  - Otomatik hatƒ±rlatƒ±cƒ±lar
  - Tahsilat planlamasƒ±
  - Vadesinde tahsilat raporu

- **Collection Status**
  - Tahsilat durumu takibi
  - √ñdenmemi≈ü √ßekler
  - ƒ∞ptal edilen √ßekler
  - Protestolu √ßekler

#### **Promissory Note Management**
- **Note Tracking**
  - Senet kayƒ±t sistemi
  - Vade takibi
  - Ciro i≈ülemleri
  - Teminat durumu

- **Maturity Management**
  - Vade y√∂netimi
  - Otomatik uyarƒ±lar
  - Yenileme √∂nerileri
  - Collection scheduling

- **Endorsement Handling**
  - Ciro i≈ülemleri
  - Ciro zinciri takibi
  - Yasal sorumluluk
  - Risk deƒüerlendirmesi

#### **Bank Reconciliation**
- **Automatic Matching**
  - Otomatik e≈üle≈ütirme
  - Hesap mutabakatƒ±
  - Fark analizi
  - Exception reporting

- **Discrepancy Resolution**
  - Uyumsuzluk √ß√∂z√ºm√º
  - Ara≈ütƒ±rma s√ºreci
  - D√ºzeltme kayƒ±tlarƒ±
  - Onay s√ºre√ßleri

#### **Risk Management**
- **Bounced Check Tracking**
  - Kar≈üƒ±lƒ±ksƒ±z √ßek takibi
  - M√º≈üteri blacklisti
  - Risk skorlamasƒ±
  - Legal action tracking

- **Credit Hold Automation**
  - Otomatik kredi durdurma
  - Risk e≈üik deƒüerleri
  - Escalation procedures
  - Override approvals

### **3. Kredi ve Transfer ƒ∞≈ülemleri**

#### **Credit Facility Management**
- **Credit Lines**
  - Kredi line'larƒ±
  - Kullanƒ±m takibi
  - Faiz hesaplamasƒ±
  - Geri √∂deme planlarƒ±

- **Utilization Tracking**
  - Kullanƒ±m oranlarƒ±
  - Available credit
  - Commitment fees
  - Covenant monitoring

- **Interest Calculation**
  - Faiz hesaplamalarƒ±
  - Compound interest
  - Rate changes
  - Accrual accounting

#### **Inter-Bank Transfers**
- **Transfer Processing**
  - Transfer i≈üleme
  - EFT/SWIFT transferler
  - Confirmation tracking
  - Fee management

- **Reconciliation**
  - Transfer mutabakatƒ±
  - Status tracking
  - Exception handling
  - Audit trail

#### **Payment Processing**
- **Supplier Payments**
  - Tedarik√ßi √∂demeleri
  - Batch payments
  - Approval workflow
  - Payment methods

- **Customer Receipts**
  - M√º≈üteri tahsilatlarƒ±
  - Multiple payment methods
  - Allocation rules
  - Cash application

#### **Installment Management**
- **Payment Schedules**
  - √ñdeme planlarƒ±
  - Otomatik hatƒ±rlatƒ±cƒ±lar
  - Collection tracking
  - Default management

### **4. Treasury Management**

#### **Cash Position Management**
- G√ºnl√ºk nakit pozisyonu
- Banka bakiyeleri
- Yatƒ±rƒ±m portf√∂y√º
- Bor√ß pozisyonu

#### **Investment Management**
- Kƒ±sa vadeli yatƒ±rƒ±mlar
- Portf√∂y y√∂netimi
- Yield optimization
- Risk management

### **5. Financial Reporting**

#### **Standard Financial Reports**
- **P&L Automation**
  - Otomatik kar/zarar
  - Periyodik raporlar
  - Trend analizleri
  - Budget vs actual

- **Balance Sheet Generation**
  - Bilan√ßo olu≈üturma
  - Asset/liability tracking
  - Equity calculations
  - Ratio analysis

- **Cash Flow Statements**
  - Nakit akƒ±≈ü tablosu
  - Operating activities
  - Investing activities
  - Financing activities

#### **Management Reports**
- DSO/DPO analysis
- Working capital analysis
- ROI/ROA calculations
- Financial ratios

---

## üóÑÔ∏è Database Models

### **1. Currency (Para Birimi)**
```python
class Currency(models.Model):
    currency_code = models.CharField(max_length=3, unique=True)  # TRY, USD, EUR
    currency_name = models.CharField(max_length=50)
    symbol = models.CharField(max_length=5)
    decimal_places = models.IntegerField(default=2)
    is_base_currency = models.BooleanField(default=False)
    is_active = models.BooleanField(default=True)
    created_at = models.DateTimeField(auto_now_add=True)
```

### **2. ExchangeRate (D√∂viz Kuru)**
```python
class ExchangeRate(models.Model):
    from_currency = models.ForeignKey(Currency, on_delete=models.CASCADE, related_name='rates_from')
    to_currency = models.ForeignKey(Currency, on_delete=models.CASCADE, related_name='rates_to')
    rate_date = models.DateField()
    rate = models.DecimalField(max_digits=15, decimal_places=6)
    source = models.CharField(max_length=50, default='TCMB')
    is_manual = models.BooleanField(default=False)
    created_at = models.DateTimeField(auto_now_add=True)
    
    class Meta:
        unique_together = ['from_currency', 'to_currency', 'rate_date']
```

### **3. Bank (Banka)**
```python
class Bank(models.Model):
    bank_code = models.CharField(max_length=10, unique=True)
    bank_name = models.CharField(max_length=100)
    swift_code = models.CharField(max_length=11, blank=True)
    country = models.CharField(max_length=50, default='Turkey')
    contact_info = models.JSONField(default=dict)
    is_active = models.BooleanField(default=True)
```

### **4. BankAccount (Banka Hesabƒ±)**
```python
class BankAccount(models.Model):
    account_number = models.CharField(max_length=30)
    account_name = models.CharField(max_length=100)
    bank = models.ForeignKey(Bank, on_delete=models.CASCADE)
    branch_code = models.CharField(max_length=10, blank=True)
    iban = models.CharField(max_length=34, blank=True)
    currency = models.ForeignKey(Currency, on_delete=models.CASCADE)
    account_type = models.CharField(max_length=20, choices=ACCOUNT_TYPE_CHOICES)
    current_balance = models.DecimalField(max_digits=20, decimal_places=2, default=0)
    minimum_balance = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    overdraft_limit = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    interest_rate = models.DecimalField(max_digits=5, decimal_places=2, default=0)
    is_active = models.BooleanField(default=True)
    company = models.ForeignKey('core.Company', on_delete=models.CASCADE)
```

### **5. Check (√áek)**
```python
class Check(models.Model):
    check_number = models.CharField(max_length=20)
    check_type = models.CharField(max_length=20, choices=CHECK_TYPE_CHOICES)  # Received/Issued
    customer = models.ForeignKey('crm.Customer', on_delete=models.CASCADE, null=True, blank=True)
    supplier = models.ForeignKey('procurement.Supplier', on_delete=models.CASCADE, null=True, blank=True)
    bank_account = models.ForeignKey(BankAccount, on_delete=models.CASCADE)
    amount = models.DecimalField(max_digits=15, decimal_places=2)
    currency = models.ForeignKey(Currency, on_delete=models.CASCADE)
    issue_date = models.DateField()
    due_date = models.DateField()
    status = models.CharField(max_length=20, choices=CHECK_STATUS_CHOICES)
    collection_date = models.DateField(null=True, blank=True)
    bounce_reason = models.CharField(max_length=200, blank=True)
    notes = models.TextField(blank=True)
    created_by = models.ForeignKey(User, on_delete=models.CASCADE)
    is_postdated = models.BooleanField(default=False)
```

### **6. PromissoryNote (Senet)**
```python
class PromissoryNote(models.Model):
    note_number = models.CharField(max_length=20)
    note_type = models.CharField(max_length=20, choices=NOTE_TYPE_CHOICES)  # Received/Issued
    customer = models.ForeignKey('crm.Customer', on_delete=models.CASCADE, null=True, blank=True)
    supplier = models.ForeignKey('procurement.Supplier', on_delete=models.CASCADE, null=True, blank=True)
    amount = models.DecimalField(max_digits=15, decimal_places=2)
    currency = models.ForeignKey(Currency, on_delete=models.CASCADE)
    issue_date = models.DateField()
    maturity_date = models.DateField()
    status = models.CharField(max_length=20, choices=NOTE_STATUS_CHOICES)
    interest_rate = models.DecimalField(max_digits=5, decimal_places=2, default=0)
    guarantor = models.CharField(max_length=100, blank=True)
    collateral_description = models.TextField(blank=True)
    endorsements = models.JSONField(default=list)
    collection_date = models.DateField(null=True, blank=True)
    notes = models.TextField(blank=True)
    created_by = models.ForeignKey(User, on_delete=models.CASCADE)
```

### **7. CreditLimit (Kredi Limiti)**
```python
class CreditLimit(models.Model):
    customer = models.OneToOneField('crm.Customer', on_delete=models.CASCADE)
    credit_limit = models.DecimalField(max_digits=15, decimal_places=2)
    currency = models.ForeignKey(Currency, on_delete=models.CASCADE)
    current_balance = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    available_credit = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    credit_score = models.IntegerField(default=0)  # 0-1000
    risk_category = models.CharField(max_length=10, choices=RISK_CATEGORY_CHOICES)
    payment_terms = models.CharField(max_length=50)
    last_review_date = models.DateField()
    next_review_date = models.DateField()
    credit_hold = models.BooleanField(default=False)
    hold_reason = models.TextField(blank=True)
    approved_by = models.ForeignKey(User, on_delete=models.SET_NULL, null=True)
    is_active = models.BooleanField(default=True)
```

### **8. CashFlowForecast (Nakit Akƒ±≈ü Tahmini)**
```python
class CashFlowForecast(models.Model):
    forecast_date = models.DateField()
    period_start = models.DateField()
    period_end = models.DateField()
    opening_balance = models.DecimalField(max_digits=20, decimal_places=2)
    projected_inflows = models.DecimalField(max_digits=20, decimal_places=2)
    projected_outflows = models.DecimalField(max_digits=20, decimal_places=2)
    closing_balance = models.DecimalField(max_digits=20, decimal_places=2)
    minimum_required = models.DecimalField(max_digits=20, decimal_places=2)
    surplus_deficit = models.DecimalField(max_digits=20, decimal_places=2)
    currency = models.ForeignKey(Currency, on_delete=models.CASCADE)
    scenario = models.CharField(max_length=20, choices=SCENARIO_CHOICES)
    confidence_level = models.DecimalField(max_digits=5, decimal_places=2, default=80)
    notes = models.TextField(blank=True)
    created_by = models.ForeignKey(User, on_delete=models.CASCADE)
    created_at = models.DateTimeField(auto_now_add=True)
```

### **9. BankTransaction (Banka Hareketi)**
```python
class BankTransaction(models.Model):
    transaction_number = models.CharField(max_length=30, unique=True)
    bank_account = models.ForeignKey(BankAccount, on_delete=models.CASCADE)
    transaction_date = models.DateField()
    value_date = models.DateField()
    transaction_type = models.CharField(max_length=20, choices=TRANSACTION_TYPE_CHOICES)
    amount = models.DecimalField(max_digits=20, decimal_places=2)
    currency = models.ForeignKey(Currency, on_delete=models.CASCADE)
    exchange_rate = models.DecimalField(max_digits=15, decimal_places=6, default=1)
    base_amount = models.DecimalField(max_digits=20, decimal_places=2)
    description = models.CharField(max_length=200)
    reference_number = models.CharField(max_length=50, blank=True)
    counterparty = models.CharField(max_length=100, blank=True)
    counterparty_account = models.CharField(max_length=30, blank=True)
    fee_amount = models.DecimalField(max_digits=10, decimal_places=2, default=0)
    running_balance = models.DecimalField(max_digits=20, decimal_places=2)
    is_reconciled = models.BooleanField(default=False)
    reconciliation_date = models.DateField(null=True, blank=True)
    matched_document = models.CharField(max_length=50, blank=True)
    created_at = models.DateTimeField(auto_now_add=True)
```

### **10. FinancialRatio (Finansal Oran)**
```python
class FinancialRatio(models.Model):
    calculation_date = models.DateField()
    period_type = models.CharField(max_length=10, choices=PERIOD_TYPE_CHOICES)
    current_ratio = models.DecimalField(max_digits=8, decimal_places=4, null=True)
    quick_ratio = models.DecimalField(max_digits=8, decimal_places=4, null=True)
    debt_to_equity = models.DecimalField(max_digits=8, decimal_places=4, null=True)
    return_on_assets = models.DecimalField(max_digits=8, decimal_places=4, null=True)
    return_on_equity = models.DecimalField(max_digits=8, decimal_places=4, null=True)
    gross_margin = models.DecimalField(max_digits=8, decimal_places=4, null=True)
    net_margin = models.DecimalField(max_digits=8, decimal_places=4, null=True)
    asset_turnover = models.DecimalField(max_digits=8, decimal_places=4, null=True)
    inventory_turnover = models.DecimalField(max_digits=8, decimal_places=4, null=True)
    receivables_turnover = models.DecimalField(max_digits=8, decimal_places=4, null=True)
    dso = models.DecimalField(max_digits=8, decimal_places=2, null=True)  # Days Sales Outstanding
    dpo = models.DecimalField(max_digits=8, decimal_places=2, null=True)  # Days Payable Outstanding
    working_capital = models.DecimalField(max_digits=20, decimal_places=2, null=True)
    created_at = models.DateTimeField(auto_now_add=True)
```

---

## üîß API Endpoints

### **Currency & Exchange Rate APIs**
```
GET    /api/v1/finance/currencies/               # Para birimi listesi
POST   /api/v1/finance/currencies/               # Yeni para birimi
GET    /api/v1/finance/exchange-rates/           # D√∂viz kurlarƒ±
POST   /api/v1/finance/exchange-rates/update/    # Kur g√ºncelleme
GET    /api/v1/finance/exchange-rates/history/   # Kur ge√ßmi≈üi
```

### **Bank Management APIs**
```
GET    /api/v1/finance/banks/                    # Banka listesi
POST   /api/v1/finance/banks/                    # Yeni banka
GET    /api/v1/finance/bank-accounts/            # Banka hesabƒ± listesi
POST   /api/v1/finance/bank-accounts/            # Yeni banka hesabƒ±
GET    /api/v1/finance/bank-accounts/{id}/balance/ # Hesap bakiyesi
```

### **Check & Note Management APIs**
```
GET    /api/v1/finance/checks/                   # √áek listesi
POST   /api/v1/finance/checks/                   # Yeni √ßek
PUT    /api/v1/finance/checks/{id}/collect/      # √áek tahsilat
PUT    /api/v1/finance/checks/{id}/bounce/       # √áek iadesi
GET    /api/v1/finance/promissory-notes/         # Senet listesi
POST   /api/v1/finance/promissory-notes/         # Yeni senet
```

### **Credit Management APIs**
```
GET    /api/v1/finance/credit-limits/            # Kredi limiti listesi
POST   /api/v1/finance/credit-limits/            # Yeni kredi limiti
PUT    /api/v1/finance/credit-limits/{id}/       # Kredi limiti g√ºncelleme
POST   /api/v1/finance/credit-limits/{id}/hold/  # Kredi durdurma
POST   /api/v1/finance/credit-score/calculate/   # Kredi puanƒ± hesaplama
```

### **Cash Flow APIs**
```
GET    /api/v1/finance/cash-flow/forecast/       # Nakit akƒ±≈ü tahmini
POST   /api/v1/finance/cash-flow/forecast/       # Yeni tahmin
GET    /api/v1/finance/cash-flow/actual/         # Ger√ßekle≈üen nakit akƒ±≈ü
GET    /api/v1/finance/cash-position/            # G√ºnl√ºk nakit pozisyonu
```

### **Reporting APIs**
```
GET    /api/v1/finance/reports/financial-ratios/ # Finansal oranlar
GET    /api/v1/finance/reports/aging/            # Ya≈ülandƒ±rma raporu
GET    /api/v1/finance/reports/cash-flow/        # Nakit akƒ±≈ü raporu
GET    /api/v1/finance/reports/profitability/    # Karlƒ±lƒ±k raporu
```

---

## üé® UI/UX Gereksinimleri

### **Finance Dashboard**
- Cash position overview
- Key financial ratios
- Upcoming due dates
- Credit utilization
- Exchange rate ticker

### **Treasury Management Interface**
- Bank account balances
- Cash flow timeline
- Investment portfolio
- Debt obligations

### **Credit Management Interface**
- Customer credit overview
- Risk assessment tools
- Payment behavior analysis
- Credit approval workflow

### **Check/Note Management**
- Due date calendar
- Collection tracking
- Status updates
- Batch processing

---

## üöÄ Implementation Plan

### **Phase 1: Core Financial (3 hafta)**
- Currency management
- Bank account setup
- Basic transactions
- Exchange rate integration

### **Phase 2: Credit Management (2 hafta)**
- Credit limit setup
- Risk assessment
- Payment tracking
- Automated controls

### **Phase 3: Instruments (2 hafta)**
- Check management
- Promissory notes
- Collection tracking
- Risk management

### **Phase 4: Treasury & Reporting (1 hafta)**
- Cash flow forecasting
- Financial ratios
- Advanced reporting
- Dashboard integration

---

**Status:** Planning Phase  
**Next Review:** TBD  
**Owner:** Context7 Development Team 